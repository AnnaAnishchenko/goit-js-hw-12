{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\">\n     <img class=\"gallery-img\"\n      src=\"${imgInfo.webformatURL}\" \n      alt=\"${imgInfo.tags}\" />\n  </a>\n    <div class=\"info\">\n      <p><b>Likes:</b> ${imgInfo.likes}</p>\n      <p><b>Views:</b> ${imgInfo.views}</p>\n      <p><b>Comments:</b> ${imgInfo.comments}</p>\n      <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n    </div>\n  </li>\n  `;\n};\n","const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = 'your_api_key';\n\nexport const fetchPhotos = searchedQuery => {\n  const urlParams = new URLSearchParams({\n    key: '45552769-3540ba49dba2ab2d34c825df8',\n    q: searchedQuery,\n    orientation: 'horizontal',\n    per_page: 20,\n    safesearch: 'true',\n  });\n\n  return fetch(`${BASE_URL}/?${urlParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n};\n","//pixabay.com/api/\n\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// бібліотека axios\nimport axios, { isCancel, AxiosError } from 'axios';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\n\n// Створюємо екземпляр SimpleLightbox\nlet lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n//функції для показу  завантажувача\nconst showLoader = () => {\n  loaderEl.style.display = 'block';\n};\n\n//функції для приховування завантажувача\nconst hideLoader = () => {\n  loaderEl.style.display = 'none';\n};\n\nconst onSearchFormSubmit = event => {\n  // відміна дії за замовчуванням\n  event.preventDefault();\n\n  //значення елемента форми\n  const searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  // Перевірка на порожній запит\n  if (!searchedValue) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return;\n  }\n\n  // викликаємо завантажувач\n  showLoader();\n\n  // Запит на сервер\n  fetchPhotos(searchedValue)\n    // отримуємо дані\n    .then(data => {\n      // Перевірка на відсутність результатів\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          title: 'Warning',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n\n        // Очищення галереї перед новим пошуком\n        galleryEl.innerHTML = '';\n        searchFormEl.reset();\n\n        return;\n      }\n\n      // Перебираємо масив, додаємо всі елементи\n      const galleryCardsTemplate = data.hits\n        .map(imgDetails => createGalleryCardTemplate(imgDetails))\n        .join('');\n\n      // Додаємо в розмітку HTML\n      galleryEl.innerHTML = galleryCardsTemplate;\n\n      // Оновлюємо галерею SimpleLightbox\n      lightbox.refresh();\n    })\n    // ловимо помилку\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `An error occurred: ${err.message}`,\n      });\n    })\n    .finally(() => {\n      // Приховуємо завантажувач після завершення запиту\n      hideLoader();\n    });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["createGalleryCardTemplate","imgInfo","BASE_URL","fetchPhotos","searchedQuery","urlParams","response","searchFormEl","galleryEl","loaderEl","lightbox","SimpleLightbox","showLoader","hideLoader","onSearchFormSubmit","event","searchedValue","iziToast","data","galleryCardsTemplate","imgDetails","err"],"mappings":"6vBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,aAEIA,EAAQ,aAAa;AAAA;AAAA,aAErBA,EAAQ,YAAY;AAAA,aACpBA,EAAQ,IAAI;AAAA;AAAA;AAAA,yBAGAA,EAAQ,KAAK;AAAA,yBACbA,EAAQ,KAAK;AAAA,4BACVA,EAAQ,QAAQ;AAAA,6BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,ICZxCC,EAAW,0BAGJC,EAAcC,GAAiB,CAC1C,MAAMC,EAAY,IAAI,gBAAgB,CACpC,IAAK,qCACL,EAAGD,EACH,YAAa,aACb,SAAU,GACV,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,GAAGF,CAAQ,KAAKG,CAAS,EAAE,EAAE,KAAKC,GAAY,CACzD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACpB,CAAG,CACH,ECDMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAGpD,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAChB,CAAC,EAGD,MAAMC,EAAa,IAAM,CACvBH,EAAS,MAAM,QAAU,OAC3B,EAGMI,EAAa,IAAM,CACvBJ,EAAS,MAAM,QAAU,MAC3B,EAEMK,EAAqBC,GAAS,CAElCA,EAAM,eAAc,EAGpB,MAAMC,EAAgBT,EAAa,SAAS,WAAW,MAAM,OAG7D,GAAI,CAACS,EAAe,CAClBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACD,CAGDL,IAGAT,EAAYa,CAAa,EAEtB,KAAKE,GAAQ,CAEZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,QAAQ,CACf,MAAO,UACP,QACE,0EACZ,CAAS,EAGDT,EAAU,UAAY,GACtBD,EAAa,MAAK,EAElB,MACD,CAGD,MAAMY,EAAuBD,EAAK,KAC/B,IAAIE,GAAcpB,EAA0BoB,CAAU,CAAC,EACvD,KAAK,EAAE,EAGVZ,EAAU,UAAYW,EAGtBT,EAAS,QAAO,CACtB,CAAK,EAEA,MAAMW,GAAO,CACZJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBI,EAAI,OAAO,EAClD,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CAEbR,GACN,CAAK,CACL,EAEAN,EAAa,iBAAiB,SAAUO,CAAkB"}